<!DOCTYPE html>
<p>
<head>
    <meta charset="utf-8" />
    <title>MySQL命令查询-zmt制作</title>
    <link rel="stylesheet" type="text/css" href="mysql.css"/>
</head>
<header>
    <div class="menu">
        <ul>
            <li>库与表字段
                <ul>
                    <li><p onclick="one()"><button>库的操作</button></p></li>
                    <li><p onclick="two()"><button>表的操作</button></p></li>
                    <li><p onclick="three()"><button>字段操作</button></p></li>
                </ul>
            </li>
            <li>表查询函数
                <ul>
                    <li><p onclick="four()"><button>表中操作</button></p></li>
                    <li><p onclick="five()"><button>查询操作</button></p></li>
                    <li><p onclick="six()"><button>函数内容</button></p></li>
                </ul>
            </li>
            <li>用户与约束
                <ul>
                    <li><p onclick="seven()"><button>用户管理</button></p></li>
                    <li><p onclick="eight()"><button>函数操作</button></p></li>
                    <li><p onclick="nine()"><button>约束操作</button></p></li>
                </ul>
            </li>
            <li>多表与事务
                <ul>
                    <li><p onclick="ten()"><button>多表查询</button></p></li>
                    <li><p onclick="ele()"><button>事务操作</button></p></li>
                    <li><p onclick="twl()"><button>事务特性</button></p></li>
                </ul>
            </li>
            <li>下载
                <ul>
                    <li><a href="1.zip">资料下载.....</a></li>
                </ul>
            </li>
            <liq>
                    <form  method="get" action="https://www.baidu.com/s"target="_blank">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="text" placeholder="在线搜索"name="word" class="text" />
                        <input type="submit" value="搜索" class="search">
                    </form>
            </liq>
        </ul>
    </div>
</header>
<div id="top1">
    <hr/>
    <p><b>库的操作</b></p>
    <p>
        <hr/>
        #库的操作<br/>
        show&nbsp;databases;&nbsp;#展示库名<br/>
        use+库名;&nbsp;#使用库<br/>
        create&nbsp;database&nbsp;库名&nbsp;#创建库<br/>
        select&nbsp;database();&nbsp;#查询当前数据库<br/>
        drop&nbsp;库名#删除库&nbsp;
    </p>
</div>
<div id="top2">
    <hr/>
    <p><b>表的操作</b></p>
    <p>
    <hr/>
    #表的操作<br/>
    create&nbsp;table&nbsp;表名(int&nbsp;id&nbsp;comment'&nbsp;');&nbsp;#创建表<br/>
    drop&nbsp;table[if&nbsp;exits]&nbsp;表名&nbsp;#删除表<br/>
    show&nbsp;tables;&nbsp;#展示表名	<br/>
    desc&nbsp;表名;&nbsp;#查表的结构	<br/>
    show&nbsp;create&nbsp;table&nbsp;表名;&nbsp;#查询表的详情 <br/>
    alter&nbsp;table&nbsp;表名&nbsp;rename&nbsp;to&nbsp;表名;&nbsp;#修改表名<br/>
    truncate&nbsp;table&nbsp;表名;&nbsp;#删除表并创建新表<br/>
    select&nbsp;*&nbsp;from&nbsp;表名;&nbsp;#查询表的内容
    </p>
</div>
<div id="top3">
    <hr/>
    <p><b>字段操作</b></p>
    <p>
    <hr/>
    #(表中)字段(标头)的操作<br/>
    alter&nbsp;table&nbsp;表名&nbsp;add&nbsp;字段名+类型;&nbsp;#为表加入新的字段<br/>
    alter&nbsp;table&nbsp;表名&nbsp;modify&nbsp;字段名&nbsp;新数据类型;&nbsp;#修改数据类型<br/>
    alter&nbsp;table&nbsp;表名&nbsp;change&nbsp;旧+&nbsp;新字段名+类型;&nbsp;#为字段改名<br/>
    alter&nbsp;表名&nbsp;drop&nbsp;字段;&nbsp;#删除字段
    </p>
</div>
<div id="top4">
    <hr/>
    <p><b>表中操作</b></p>
    <p>
    <hr/>
    #insert<br/>
    insert&nbsp;#添加表中内容<br/>
    insert&nbsp;into&nbsp;表名&nbsp;(字段1，字段2，....)&nbsp;values(值1，值2，..);&nbsp;#添加指定内容值与字段一 一对应 <br/>
    insert&nbsp;into&nbsp;表名&nbsp;values (值...)&nbsp;#为全部字段添加值<br/>
    insert&nbsp;into&nbsp;表名(字段1,字段2,...)&nbsp;values(值1，值2,..)（值11,值21,....)&nbsp;#同时添加两个内容,注意用逗号隔开<br/>
    案例：&nbsp;为employee表中id添加1，name为itcast<br/>
    insert&nbsp;into&nbsp;employee (id,name)&nbsp;values(1,'itcast')&nbsp;#update<br/>
    update&nbsp;#修改表中内容<br/>
    update&nbsp;表名&nbsp;set&nbsp;字段名1=值1 ,&nbsp;字段名2=值2，....&nbsp;#修改整个表的内容<br/>
    update&nbsp;表名&nbsp;set&nbsp;字段名=值&nbsp;where 字段=值&nbsp;#where代表条件，只修改条件的<br/>
    案例<br/>
    update&nbsp;from&nbsp;set&nbsp;name='lll'&nbsp;where&nbsp;id='1'&nbsp;#将id值为1的name改为lll<br/>
    #delete<br/>
    delete&nbsp;#删除数据<br/>
    delete&nbsp;from&nbsp;表名&nbsp;where&nbsp;字段=值&nbsp;#删除符合条件的内容<br/>
    delete&nbsp;from&nbsp;表名&nbsp;#无条件,删除整个表<br/>
    </p>
</div>
<div id="top5">
    <hr/>
    <p><b>查询操作</b></p>
    <p>
    <hr/>
    #select&nbsp; * &nbsp;from&nbsp; employee; 查看整个表<br/>
    查询需求<br/>
    基本查询<br/>
    查看指定字段name,workno,age 返回<br/>
    select&nbsp;name ,workno,age&nbsp;from&nbsp;employee;<br/>
    查询所有字段返回<br/>
    select&nbsp;id,workno,name,gender,age,idcard,entrydate&nbsp;from&nbsp;employee;<br/>
    select&nbsp;*&nbsp;from&nbsp;employee;<br/>
    查看员工日期&nbsp;起别名<br/>
    select&nbsp;entrydate&nbsp;as&nbsp;'入职时间'&nbsp;from&nbsp;employee;<br/>
    查看性别<br/>
    select&nbsp;distinct&nbsp;address &nbsp;'地址'&nbsp;from&nbsp;employee;<br/>
    条件查询<br/>
    select&nbsp;字段名&nbsp;from&nbsp;表名&nbsp;where&nbsp;条件列表&nbsp;（一个或者多个）<br/>
    查询年龄为25的人<br/>
    select &nbsp;*&nbsp; from&nbsp;employee&nbsp; where&nbsp; age&nbsp; =&nbsp;25;<br/>
    查询年龄小于40的员工<br/>
    select&nbsp; * &nbsp;from&nbsp; employee&nbsp; where&nbsp; age <=40;<br/>
    查询无身份证号的员工<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; idcard&nbsp;is&nbsp;null;<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; idcard&nbsp;is&nbsp;not&nbsp;null;<br/>
    查询年龄不为25的员工<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; age&nbsp; !=&nbsp;25;<br/>
    查询年龄在15到40之间<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; age&nbsp; >=&nbsp;15&&age<=40;<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; age&nbsp; >= &nbsp;15 &nbsp;and &nbsp;age<=40;<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; age&nbsp; between&nbsp; 15 &nbsp;and&nbsp;40;<br/>
    性别为女且年龄小于40<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; gender='女'&nbsp; && &nbsp;age<=&nbsp;40;<br/>
    查询年龄等于18或25或88<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; age&nbsp; = 18 or &nbsp;age=25 or&nbsp; age =88;<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; age&nbsp; in&nbsp; (18,25,88);<br/>
    查询姓名为三个字的员工like  _%<br/>
    一个_代表一个字符<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; name&nbsp; like&nbsp; '___';<br/>
    查询身份证号最后以为是x,用%表示；<br/>
    select&nbsp; *&nbsp; from&nbsp; employee&nbsp; where&nbsp; idcard&nbsp; like&nbsp; '%x';<br/>
    -- 分组查询<br/>
    -- select 字段列表 from 表名 //where 条件// group by 分组字段名 //having 分组后过滤条件//<br/>
    -- 根据性别gender 分组，统计男性女性数量<br/>
    select gender,count(*) from employee group by gender;<br/>
    -- 根据性别分组，求男性女性员工平均年龄<br/>
    select gender,avg(age) from employee group by gender;
    -- 查询年龄小于45的员工，并且根据工作地址进行分组，获取员工数量大于等于3的工作地址<br/>
    -- 先分组<br/>
    select address,count(*) from employee where age <45 group by address having count(*)>=3;<br/>
    -- 排序查询<br/>
    -- select 字段表 from 表名 order by 字段1 排序方式1 ，字段2 排序方式2;<br/>
    -- ASC 代表升序（默认）<br/>
    -- DESC 降序<br/>
    -- 根据年龄对公司员工进行升序排序<br/>
    select * from employee order by age asc;<br/>
    select * from employee order by age ;<br/>
    -- 降序排序;<br/>
    select * from employee order by age desc;<br/>
    -- 根据入职时间进行降序排序<br/>
    select * from employee order by entrydate desc;
    -- 根据年龄对公司员工升序，年龄相同，再按照入职时间进行降序排序;<br/>
    select * from employee order by age asc ,entrydate desc;
    -- asc可省略<br/>
    -- 分页查询<br/>
    -- 语法select 字段列表 from 表名 limit 起始索引 查询记录数;<br/>
    --  起始索引从0开始（查询页码-1）*每页显示记录数<br/>
    -- 第二页的索引为10；（2-1）*10=10；<br/>
    -- 分页查询是数据库的方言MySQL中是limit<br/>
    -- 从第一页开始查询索引可以省略<br/>
    -- 查询第一页员工数据，每页显示10条记录<br/>
    select * from employee limit 0,10;<br/>
    select * from employee limit 10;<br/>
    -- 查询第二页员工数据 每页展示10条记录<br/>
    select * from employee limit 10,10;<br/>
    -- 案例练习<br/>
    -- 查询年龄为20，21，23，22女性员工<br/>
    select * from employee where gender='女'and age in (20,21,22,23);<br/>
    -- 查询性比为男，并且年龄为20-40 以姓名为3个字的员工<br/>
    select * from employee where gender='男'and age between 20 and 40 and name like '___';<br/>
    -- 统计员工表中，年龄小于60岁的男性员工和女性员工的数量<br/>
    select gender,count(*) from employee where age < 60 group by gender;<br/>
    -- 查询所有年龄小于等于35岁的员工姓名和年龄，并且对查询的年龄按升序排序，年龄相同按入职时间降序排序<br/>
    select name,age from employee where age <=35 order by age asc,entrydate desc ;<br/>
    -- 查询性别为男，且年龄再20-40岁前5个员工信息，对查询的结果按照年龄升序排序，年龄相同按入职时间升序排序<br/>
    select * from employee where gender='男' and age between 20 and 40 order by age asc,entrydate asc limit 5 ;<br/>
    -- 执行顺序<br/>
    -- from<br/>
    -- where<br/>
    -- 分组<br/>
    -- 字段表select<br/>
    -- order by排序<br/>
    -- limit分页<br/>
    -- 案例查询年龄大于30的姓名年龄，并根据年龄升序排序<br/>
    select name ,age from employee  where age>30 order by age asc;<br/>
    -- 小结<br/>
    -- select 字段列表 from 表名<br/>
    -- where 条件查询<br/>
    -- group by 分组查询 having 分组过滤<br/>
    -- order by 字段   排序 asc 升序 ，desc 降序<br/>
    -- limit 分页参数 索引从0开始
    </p>
</div>
<div id="top6">
    <hr/>
    <p><b>函数内容</b></p>
    <p>
    <hr/>
    -- 聚合函数 --作用于某一列<br/>
    -- count -- 统计数量<br/>
    -- max   -- 最大值<br/>
    -- min   -- 最小值<br/>
    -- avg   -- 平均值<br/>
    -- sum   -- 求和<br/>
    -- 用法 select 聚合函数 字段 from 表名；<br/>
    -- 统计员工数量<br/>
    select count(*) from employee;<br/>
    -- * 代表字段名 count代表有值的个数<br/>
    -- 统计员工的个数<br/>
    select count(id) from employee;<br/>
    -- 统计员工平均年龄<br/>
    select avg (age) from employee;<br/>
    -- 求员工最大年龄<br/>
    select max(age) from employee;<br/>
    -- 求员工最小年龄<br/>
    select min(age) from employee;<br/>
    -- 年龄的和<br/>
    select sum(age) from employee;<br/>
    -- 统计西安地区的员工年龄之和<br/>
    select sum(age) from employee where address ='西安';<br/>
    select sum(*) from employee;<br/>
    -- 其中* 代表整个表的字段；
    </p>
</div>
<div id="top7">
    <hr/>
    <p><b>用户管理</b></p>
    <p>
    <hr/>
    -- 用户管理<br/>
    -- DCL<br/>
    -- 控制数据库访问权限<br/>
    -- 管理用户<br/>
    -- 查询用户<br/>
    -- use mysql;<br/>
    -- select * from user;
    -- 创建用户<br/>
    -- create user '用户名'@'主机名' identified by'密码';<br/>
    -- 修改用户密码<br/>
    -- alter user '用户名'@'主机名' identified with mysql_native_password by '新密码'<br/>
    -- 删除用户<br/>
    -- drop user '用户名' @'主机名'<br/>
    -- 案例<br/>
    -- 可直接点击MySQL中的user直接打开查看<br/>
    use mysql;<br/>
    select * from user ;<br/>
    -- 创建用户itcast,只能在主机localhost访问密码为123456；无权限<br/>
    create user 'itcast'@'localhost'identified by'123456';<br/>
    -- 打开cmd 窗口输入mysql -u itcast(用户名) -p<br/>
    -- show databases;<br/>
    -- 创建用户heima ,可以任意主机访问密码为：123456；<br/>
    create user 'heima' @'%' identified by'123456';<br/>
    -- 修改用户heima密码为1234；<br/>
    alter user 'heima'@'%' identified with mysql_native_password by '1234';<br/>
    -- 删除用户itcast,heima<br/>
    drop user 'itcast'@'localhost';<br/>
    drop user 'heima '@'%';<br/>
    -- 用户权限控制（可访问其他数据库）<br/>
    -- all or all privileges 所有权限<br/>
    -- select                查询数据<br/>
    -- insert                插入数据<br/>
    -- update                修改数据<br/>
    -- delete                删除数据<br/>
    -- alter                 修改表<br/>
    -- drop                  删除数据库/表/视图<br/>
    -- create                创建数据库/表<br/>
    -- 查询权限<br/>
    -- 	show grants for '用户名'@'主机名';<br/>
    -- 授予权限<br/>
    -- 	grant 权限列表 on 数据库名.表名 to '用户名'@'主机名';<br/>
    -- 如果是所有数据库<br/>
    -- 	grant 权限列表 on *.* to '用户名'@'主机名';<br/>
    -- 撤销权限<br/>
    -- 	revoke 权限列表 on 数据库名.表名 from '用户名'@'主机名';<br/>
    -- 案例<br/>
    -- 查询权限<br/>
    show grants for 'heima'@'%';
    -- 授权<br/>
    grant all on test2.* to 'heima'@'%';
    -- 撤销权限<br/>
    revoke  all on test2.* from 'heima'@'%';<br/>
    -- 小结<br/>
    -- 用户管理（哪些用户可以访问）<br/>
    -- 权限控制（用户可对哪些数据库和表进行控制）
    </p>
</div>
<div id="top8">
    <hr/>
    <p><b>函数操作</b></p>
    <p>
    <hr/>
    -- 字符串函数<br/>
    -- 函数<br/>
    concat(s1,s2,..sn)字符串拼接，将s1,s2,...sn拼接成一个字符串<br/>
    lower(str)将字符串str全部转化为小写<br/>
    upper（str）将字符串str全部转化为大写<br/>
    lpad(str,n,pad)左填充，用字符串pad对str的左边进行填充，达到n个字符串长度<br/>
    rpad(str，n,pad)右填充，用字符串pad对str的右边进行填充，达到n个字符串长度<br/>
    trim(str)去掉字符串头部和尾部的空格<br/>
    substring(str,start,len)返回字符串str从start位置起len个长度的字符串<br/>
    -- 案例<br/>
    -- 用法 select 函数<br/>
    use test;<br/>
    select concat('Hello ',' MySql');<br/>
    select lower('Hello');<br/>
    select upper('Hello');<br/>
    select lpad('01',5,'-');-- 总长度为5，在01左填充3个-<br/>
    select rpad('01',5,'-');-- 总长度为5，在01左填充3个-<br/>
    select trim(' Hello Mysql ');<br/>
    select substring('Hello MySQL',1,5);-- 从第一个字母开始截取，截取5个，从1开始索引<br/>
    -- 实例<br/>
    -- 企业员工为5位数不足的用0来补<br/>
    update employee set workno=lpad(workno,5,'0');<br/>
    select * from employee;<br/>
    -- 数值函数<br/>
    ceil(x)向上取整<br/>
    floor(x)向下取整<br/>
    mod(x,y)返回x/y的模余数<br/>
    rand()返回0-1内的随机数<br/>
    round(x,y)求参数x的四舍五入的值，保留y位小数<br/>
    -- 案例<br/>
    select ceil(1.5);<br/>
    select ceil(1.1);<br/>
    select floor(1.5);<br/>
    select floor(1.1);<br/>
    select mod(6,4);<br/>
    select rand();<br/>
    select round(2.344,2);<br/>
    -- 生成一个六位数的随机验证码<br/>
    select lpad(round (rand()*1000000,0),6,'0');-- 补0<br/>
    -- 日期函数<br/>
    curdate()返回当前日期<br/>
    curtime()返回当前时间<br/>
    now()返回当前日期和时间<br/>
    year(date)获取指定date年份<br/>
    month(date)获取指定date月份<br/>
    day(date)获取指定date日期<br/>
    date_add(date,interval,expr,type)返回一个日期/时间值加上一个时间间隔expr后的时间值<br/>
    datediff(date1,date2)返回起始时间date1和结束时间date2之间的天数<br/>
    select curdate();<br/>
    select curtime();<br/>
    select now();<br/>
    select year(now());<br/>
    select month(now());<br/>
    select day(now());<br/>
    select date_add(now(),interval 70 day);<br/>
    select date_add(now(),interval 70 month);<br/>
    select datediff('2021-12-01','2021-10-01');-- 前大后小<br/>
    -- 查询所有员工入职天数并倒序排序<br/>
    select name,datediff(curdate(),entrydate) as 'entrydays'from employee order by entrydays desc;<br/>
    -- 流程函数<br/>
    if(value,t,f)如果value为true，则返回t,否则返回f<br/>
    ifnull(value1,value2)如果value不为空，返回value1，否则返回value2<br/>
    case&nbsp; value[val1]<br/>
    then&nbsp;[res1]...<br/>
    else&nbsp;[default]<br/>
    end &nbsp;如果val1为true,返回res1,..否则返回default默认值<br/>
    case&nbsp;[expr]&nbsp; when&nbsp; [val1]&nbsp;then&nbsp;[res1]&nbsp;...else&nbsp;[default] end如果expr的值等于val1，返回res1,.<br/>
    -- 否则返回default默认值<br/>
    if<br/>
    select&nbsp; if(true,'ok','error');<br/>
    if &nbsp;null<br/>
    select&nbsp; ifnull('ok','default');<br/>
    select&nbsp; ifnull(' ','default');<br/>
    select &nbsp;ifnull(null,'default');<br/>
    case<br/>
    -- 查询employee表员工姓名和工作地址（北京/上海---->一线城市 其他城市---->二线城市）<br/>
    select&nbsp;<br/>
    name,<br/>
    (case address when&nbsp; '北京'&nbsp;then&nbsp;'一线城市'&nbsp;when'上海'<br/>
    then&nbsp;'一线城市' &nbsp;else&nbsp; '二线城市'end) &nbsp;as'工作地址'<br/>
    from &nbsp;employee;<br/>
    -- 统计成绩<br/>
    -- >=85优秀<br/>
    -- >=60及格<br/>
    -- else 不及格<br/>
    select&nbsp; *&nbsp; from&nbsp; score;<br/>
    select<br/>
    id,<br/>
    name,<br/>
    (case when math>=85 then '优秀' when math >=60 then'及格'else '不及格'end)'数学',<br/>
    (case when english>=85 then '优秀' when english >=60 then'及格'else '不及格'end)'英语',<br/>
    (case when chinese>=85 then '优秀' when chinese >=60 then'及格'else '不及格'end)'语文'<br/>
    from score;
    </p>
</div>
<div id="top9">
    <hr/>
    <p><b>约束操作</b></p>
    <p>
    <hr/>
    -- 约束<br/>
    -- 概述<br/>
    -- 非空约束 not null<br/>
    -- 唯一约束 unique<br/>
    -- 主键约束 primary key<br/>
    -- 默认约束 default<br/>
    -- 检查约束 check<br/>
    -- 外键约束 foreing key<br/>
    -- 演示<br/>
    -- 创建表结构<br/>
    -- id自动增长 name不为空，唯一，age>0 <=120,检查约束<br/>
    -- status 状态默认为1，默认约束<br/>
    -- gender 无<br/>
    use test;<br/>
    create table user(<br/>
    id int primary key auto_increment comment'主键',<br/>
    name varchar(10) not null unique comment'姓名',<br/>
    age int check (age>0&&age<=120)comment '年龄',<br/>
    status char(1) default '1'comment '状态',<br/>
    gender char(1) comment '性别'<br/>
    )comment '用户表2';<br/>
    -- 插入数据<br/>
    insert into user(name,age,status,gender)values('Tom1','19','1','男'),('Tom2','25','0','女');<br/>
    insert into user(name,age,status,gender)values('Tom3','18','1','男');<br/>
    insert into user(name,age,status,gender)values('Tom4','80','1','男');<br/>
    insert into user(name,age,gender)values('Tom5','30','男');<br/>
    -- 外键约束<br/>
    -- 见dept 和 emp表<br/>
    -- 添加外键-- 不可随意删除表字段，保证完整性<br/>
    alter table emp add constraint fk_emp_dept_id foreign key(dept_id) references dept(id);<br/>
    -- 删除外键<br/>
    alter table emp drop  foreign key fk_emp_dept_id;<br/>
    -- 外键删除和更新行为<br/>
    -- 指定行为<br/>
    alter table emp add constraint fk_emp_dept_id foreign key(dept_id) references dept(id)<br/>
    on update cascade on delete cascade ;<br/>
    alter table emp add constraint fk_emp_dept_id foreign key(dept_id) references dept(id)<br/>
    on update set null on delete set null ;<br/>
    </p>
</div>
<div id="top10">
    <hr/>
    <p><b>多表查询</b></p>
    <p>
    <hr/>
    -- 多表查询<br/>
    -- 多表关系<br/>
    -- 一对多<br/>
    -- 多对多<br/>
    -- 一对一<br/>
    -- 建立中间表关联主键-在多对多中<br/>
    -- 一对一<br/>
    -- 多表查询<br/>
    use test;<br/>
    select * from emp,dept where emp.dept_id=dept.id;<br/>
    -- 内连接<br/>
    -- 隐式<br/>
    -- select 字段列表 from 表1表2 where 条件....;<br/>
    -- 显示<br/>
    -- select 字段列表 from 表1[inner] join 表2 on 连接条件....;<br/>
    -- 操作emp dept<br/>
    -- 连接条件emp.dept_id=dept.id<br/>
    -- 隐式<br/>
    select emp.name ,dept.name from emp,dept where emp.dept_id=dept.id;<br/>
    -- select e.name ,d.name from emp e,dept d where e.dept_id=d.id;-- 起别名进行简化<br/>
    -- 显示<br/>
    select emp.name,dept.name from emp inner join dept on emp.dept_id=dept.id;<br/>
    -- 外连接<br/>
    -- 左外<br/>
    -- select 字段列表 from 表1 left[outer] join on 条件...;<br/>
    -- select 字段列表 from 表1 right[outer] join on 条件...;<br/>
    -- 查询emp数据<br/>
    -- 左外(常用)<br/>
    select * from emp left outer join dept on emp.dept_id=dept.id;<br/>
    -- 右外<br/>
    select * from emp right outer join dept on emp.dept_id=dept.id;<br/>
    -- 自连接<br/>
    -- select 字段列表 from 表A 别名A join 表A 别名B on 条件...;<br/>
    -- 操作查询员工所属领导名字(必须起别名)（不包含无领导）<br/>
    select a.name,b.name from emp a ,emp b where a.managerid=b.id;<br/>
    -- 外连接操作(可查询无领导的人)<br/>
    select a.name '员工',b.name '领导' from emp a left join emp b on a.managerid=b.id;<br/>
    -- 联合查询<br/>
    -- union ,union all<br/>
    -- select 字段列表 from 表A ... union [all] select 字段列表 from 表B ....;<br/>
    -- 操作emp<br/>
    -- 薪资低于5000的员工年龄大于50岁的员工查询<br/>
    select * from emp where salary<12000<br/>
    union all<br/>
    select *from emp where age>34;<br/>
    -- 去重<br/>
    select * from emp where salary<12000<br/>
    union<br/>
    select *from emp where age>34;<br/>
    -- 子查询<br/>
    -- select * from t1 where column1=(select column1 from t2);<br/>
    -- 标量子查询<br/>
    -- 返回结果为单个值<br/>
    -- = <> > >= <=<br/>
    -- 查询研发部的ID 对应员工的信息<br/>
    select id from dept where name='研发部';<br/>
    select * from emp where dept_id=1;<br/>
    -- 标量子查询<br/>
    select * from emp where dept_id=(select id from dept where name='研发部');<br/>
    -- 查询韦一笑入职日期<br/>
    select  entrydate from emp where name ='韦一笑';<br/>
    -- 查询指定入职日期后的入职员工信息<br/>
    select * from emp where entrydate>'2002-02-05';<br/>
    -- 合并<br/>
    select * from emp where entrydate>(select  entrydate from emp where name ='韦一笑');<br/>
    -- 列子查询<br/>
    -- 子查询返回的结果是一列（可以是多行），这种子查询称为列子查询<br/>
    -- 常用操作符:in,not in,any,some,all<br/>
    -- any 返回列表中，只要有任意一个满足即可<br/>
    -- all 所有的全部满足<br/>
    -- 查询总经办部和研发部所有员工信息<br/>
    select id from dept where name='总经办'or name='研发部';<br/>
    -- 根据部门ID，查询员工信息<br/>
    select * from emp where dept_id in (1,5);<br/>
    -- 合并<br/>
    select * from emp where dept_id in (select id from dept where name='总经办'or name='研发部');<br/>
    -- 查询所有总经办的员工<br/>
    select id from dept where name='总经办';<br/>
    select salary from emp where dept_id='5';<br/>
    select salary from emp where dept_id=(select id from dept where name='总经办');<br/>
    -- 比总经办工资高的员工<br/>
    select * from emp where salary > all(select salary from emp where dept_id=(select id from dept where name='总经办'));<br/>
    -- 查询比研发部其中任意一人工资高的员工信息<br/>
    select salary from emp where dept_id=(select id from dept where name='研发部');<br/>
    select * from emp where salary>any(select salary from emp where dept_id=(select id from dept where name='研发部'));<br/>
    -- 行子查询<br/>
    -- = ,<> ,in not
    -- 查询与杨逍相同的领导的员工<br/>
    select salary,managerid from emp where name='杨逍';<br/>
    -- 1<br/>
    select *from emp where salary =8400 and managerid='2';<br/>
    -- 2<br/>
    select * from emp where(salary,managerid)=(8400,2);<br/>
    -- 合并<br/>
    select * from emp where(salary,managerid)=(select salary,managerid from emp where name='杨逍');<br/>
    -- 表子查询<br/>
    -- 查询与杨逍小昭的职位和薪资相同的员工信息<br/>
    -- 查询职位<br/>
    select job,salary from emp where name='杨逍'or name='小昭';<br/>
    -- 查询薪资相同员工<br/>
    select * from emp where (job,salary) in (select job,salary from emp where name='杨逍'or name='小昭');<br/>
    -- 查询入职日期是2002-02-05之后的员工信息及其部门信息<br/>
    select * from emp where entrydate>'2002-02-05';<br/>
    select e.*,d.* from(select * from emp where entrydate>'2002-02-05') e left join dept d on e.dept_id=d.id;<br/>
    </p>
</div>
<div id="top11">
    <hr/>
    <p><b>事务操作</b></p>
    <p>
    <hr/>
    -- 事务<br/>
    -- 事务操作<br/>
    use test;<br/>
    select * from account;<br/>
    update account set money=2000 where name='张三'or name='李四';<br/>
    -- 转账操作<br/>
    -- 查询张三余额1<br/>
    select * from account where name='张三';<br/>
    -- 将张三余额进行减 -1000--2<br/>
    update account set money=money - 1000 where name='张三';<br/>                                                                                      --
    -- 程序抛出异常... <br/>
    -- 讲李四余额进行加 +1000--3<br/>
    update account set money=money + 1000 where name='李四';<br/>
    -- 1 2 3 语句同时进行<br/>
    -- 查询余额<br/>
    select * from account where name='张三';<br/>
    select * from account where name='李四';<br/>
    -- 查看/设置事务提交方式<br/>
    -- select @@autocommit;<br/>
    -- select @@autocommit=0;<br/>
    -- 提交事务<br/>
    -- commit;<br/>
    -- 回滚事务<br/>
    -- rollback;<br/>
    -- select @@autocommit;<br/>
    -- set @@autocommit=1;<br/>
    -- 开启事务<br/>
    start transaction; -- 或 begin;<br/>
    -- 提交事务<br/>
    commit;<br/>
    -- 执行报错，可进行回滚错误,不要进行提交事务<br/>
    -- 回滚事务<br/>
    rollback;<br/>
    </p>
</div>
<div id="top12">
    <hr/>
    <p><b>事务特性</b></p>
    <p>
    <hr/>
    -- 事务的四大特性<br/>
    -- 原子性 全部成功，全部失败<br/>
    -- 一致性 事务完成时所有数据保持一致<br/>
    -- 隔离性 在独立的环境下运行<br/>
    -- 持久性 一旦提交或回滚，对数据库中的数据改变是永久的<br/>
    -- 并发事务演示及其隔离级别<br/>
    -- 赃读，一个事务读取到另外一个还没有提交的事务<br/>
    -- 不可重复读一个事务先后读取同一条记录,但两次读取的数据不同，称之为不可重复读<br/>
    -- 幻读，一个事务按条件查询数据时，没有对应的数据行，但是在插入数据时，又发现了这行数据已存在<br/>
    -- 事务隔离级别<br/>
    -- read uncommitted       可处理(赃读，不可重复读，幻读)<br/>
    -- read committed         可处理(不可重复读，幻读)，     不可处理（赃读）<br/>
    -- repeatable read（默认）可处理(幻读)，                 不可处理（赃读，不可重复读）<br/>
    -- serializable                                         不可处理(脏读，不可重复读，幻读)<br/>
    -- 查看事务隔离级别<br/>
    select @@transaction_isolation;<br/>
    -- 设置级别<br/>
    -- set [session global] transaction isolation level {read uncommitted|...|}<br/>
    -- 问题出现情况在两个事务同时进行时可能会出现这些问题<br/>
    </p>
</div>
<script type="text/javascript">
    function one() {
        window.location.hash="top1"};
    function two() {
        window.location.hash="top2"};
    function three() {
        window.location.hash="top3"};
    function four() {
        window.location.hash="top4"};
    function five() {
        window.location.hash="top5"};
    function six() {
        window.location.hash="top6"};
    function seven() {
        window.location.hash="top7"};
    function eight() {
        window.location.hash="top8"};
    function nine() {
        window.location.hash="top9"};
    function ten() {
        window.location.hash="top10"};
    function ele() {
        window.location.hash="top11"};
    function twl() {
        window.location.hash="top12"};
</script>
</body>
<footer>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;网站内容版权归作者所有，侵权必究！
</footer>
</html>
